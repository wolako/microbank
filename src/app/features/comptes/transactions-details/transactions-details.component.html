<div class="transaction-details" *ngIf="!isLoading && transaction">
  <div class="actions mb-4">
    <button class="btn btn-secondary me-2" (click)="goBack()">â¬…ï¸ Retour</button>
    <button class="btn btn-outline-primary" (click)="printReceipt()">ğŸ–¨ï¸ Imprimer le reÃ§u</button>
    <button class="btn btn-outline-success" (click)="downloadPDF()">ğŸ“¥ TÃ©lÃ©charger le reÃ§u (PDF)</button>
  </div>

  <h2>DÃ©tails de la transaction</h2>
  <ul class="list-unstyled">
    <li><strong>ID :</strong> {{ transaction.id }}</li>
    <li><strong>Type :</strong> {{ transaction.type }}</li>
    <li><strong>Montant :</strong> {{ transaction.amount | currency:'XOF':'symbol':'1.0-0' }}</li>
    <li><strong>Description :</strong> {{ transaction.description || 'â€”' }}</li>
    <li><strong>Date :</strong> {{ transaction.created_at | date:'medium' }}</li>
    <li><strong>Solde aprÃ¨s transaction :</strong> {{ transaction.balance_after | currency:'XOF':'symbol':'1.0-0' }}</li>
    <li><strong>Canal :</strong> {{ transaction.channel || 'â€”' }}</li>
  </ul>

  <div *ngIf="transaction.type === 'facture' || transaction.type === 'Paiement de facture'" class="mt-3">
    <h5>ğŸ“„ DÃ©tails de la facture</h5>
    <ul class="list-unstyled">
      <li><strong>Facturier :</strong> {{ transaction.billerName || 'â€”' }}</li>
      <li><strong>Service :</strong> {{ transaction.service || 'â€”' }}</li>
      <li><strong>NumÃ©ro client :</strong> {{ transaction.clientNumber || 'â€”' }}</li>
      <li *ngIf="transaction.period"><strong>PÃ©riode :</strong> {{ transaction.period }}</li>
      <li *ngIf="transaction.reference"><strong>RÃ©fÃ©rence :</strong> {{ transaction.reference }}</li>
    </ul>
  </div>

  <div *ngIf="transaction.type === 'purchase'" class="mt-3">
    <h5>ğŸ›’ DÃ©tails de l'achat</h5>
    <ul class="list-unstyled">
      <li><strong>Marchand :</strong> {{ transaction.merchant || 'â€”' }}</li>
      <li><strong>Produit :</strong> {{ transaction.product || 'â€”' }}</li>
      <li><strong>RÃ©fÃ©rence commande :</strong> {{ transaction.orderRef || 'â€”' }}</li>
    </ul>
  </div>
</div>

<div *ngIf="isLoading">Chargement...</div>
<div *ngIf="errorMessage" class="alert alert-danger">{{ errorMessage }}</div>
